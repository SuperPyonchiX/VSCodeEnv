---
description: 'Guidelines for creating high-quality prompt files for GitHub Copilot'
applyTo: '**/*.prompt.md'
---

# Copilotプロンプトファイルガイドライン

GitHub Copilotがあらゆるリポジトリで一貫した高品質の結果を提供できるよう導くための、効果的で保守可能なプロンプトファイルを作成するための手順。

## 範囲と原則
- 対象読者: Copilot Chat用の再利用可能なプロンプトを作成する保守者と貢献者
- 目標: 予測可能な動作、明確な期待値、最小限の権限、リポジトリ間の移植性
- 主要参考資料: VS Codeのプロンプトファイルと組織固有の規約に関するドキュメント

## フロントマター要件
- `description`（単一文、実行可能な結果）、`mode`（`ask`、`edit`、または`agent`を明示的に選択）、`tools`（プロンプトを満たすために必要なツールバンドルの最小セット）を含める
- 特定の機能階層に依存する場合は `model` を宣言、そうでない場合はアクティブモデルを継承
- 組織に必要な追加のメタデータ（`language`、`tags`、`visibility` など）を保持
- 読みやすさとバージョン管理の明確性のため、一貫したクォート（シングルクォート推奨）を使用し、1行に1フィールドを保つ

## ファイルの命名と配置
- `.prompt.md` で終わるケバブケースのファイル名を使用し、ワークスペース標準で別のディレクトリが指定されていない限り、`.github/prompts/` に保存
- アクションを伝える短いファイル名を提供（例: `prompt1.prompt.md` ではなく `generate-readme.prompt.md`）

## 本文の構造
- クイックピック検索で表示されるよう、プロンプトの意図に合致する `#` レベルの見出しで開始
- 予測可能なセクションでコンテンツを整理。推奨ベースライン: `Mission`（ミッション）または `Primary Directive`（主要指示）、`Scope & Preconditions`（範囲と前提条件）、`Inputs`（入力）、`Workflow`（ワークフロー、ステップバイステップ）、`Output Expectations`（出力期待値）、`Quality Assurance`（品質保証）
- ドメインに合わせてセクション名を調整するが、論理的な流れは保持: 理由 → コンテキスト → 入力 → アクション → 出力 → 検証
- 発見性を助けるため、相対リンクを使用して関連するプロンプトやインストラクションファイルを参照

## 入力とコンテキストの処理
- 必須値には `${input:variableName[:placeholder]}` を使用し、ユーザーがそれらを提供する必要がある場合を説明。可能な限りデフォルトや代替案を提供
- `${selection}`、`${file}`、`${workspaceFolder}` などのコンテキスト変数は、必須の場合にのみ呼び出し、Copilotがそれらをどのように解釈すべきかを説明
- 必須コンテキストが欠落している場合の進め方を文書化（例: 「ファイルパスを要求し、未定義のままの場合は停止」）

## ツールと権限のガイダンス
- タスクを実行できる最小のセットに `tools` を制限。順序が重要な場合は、優先実行順にリスト
- プロンプトがチャットモードからツールを継承する場合、その関係を言及し、重要なツールの動作や副作用を記述
- 破壊的操作（ファイル作成、編集、ターミナルコマンド）について警告し、ワークフローにガードレールや確認手順を含める

## 指示のトーンとスタイル
- Copilotを対象とした直接的で命令形の文で記述（例: 「分析する」「生成する」「要約する」）
- 文を短く明確に保ち、ローカライゼーションをサポートするためGoogle Developer Documentation翻訳ベストプラクティスに従う
- 慣用句、ユーモア、文化固有の参照を避ける。中立的で包括的な言語を好む

## 出力の定義
- 期待される結果のフォーマット、構造、場所を指定（例: 「以下のテンプレートを使用して `docs/adr/adr-XXXX.md` を作成」）
- Copilotがいつ停止または再試行すべきかを認識できるよう、成功基準と失敗トリガーを含める
- 検証手順を提供 - 手動チェック、自動コマンド、または承認基準リスト - レビュアーがプロンプト実行後に実行できるもの

## 例と再利用可能な資産
- プロンプトが生成またはフォローすべき良い/悪い例やスキャフォールド（Markdownテンプレート、JSONスタブ）を埋め込む
- プロンプトを自己完結させるため、参照テーブル（機能、ステータスコード、ロール説明）をインラインで保持。上流リソースが変更されたらこれらのテーブルを更新
- 長いガイダンスを複製する代わりに、権威あるドキュメントにリンク

## 品質保証チェックリスト
- [ ] フロントマターフィールドが完全、正確、最小権限である
- [ ] 入力にプレースホルダー、デフォルト動作、フォールバックが含まれている
- [ ] ワークフローが準備、実行、後処理を隙間なくカバーしている
- [ ] 出力期待値にフォーマットと保存の詳細が含まれている
- [ ] 検証手順が実行可能（コマンド、差分チェック、レビュープロンプト）
- [ ] プロンプトで参照されるセキュリティ、コンプライアンス、プライバシーポリシーが最新である
- [ ] プロンプトが代表的なシナリオを使用してVS Code（`Chat: Run Prompt`）で正常に実行される

## メンテナンスガイダンス
- プロンプトが影響するコードとともにバージョン管理し、依存関係、ツール、レビュープロセスが変更されたら更新
- プロンプトを定期的にレビューして、ツールリスト、モデル要件、リンクされたドキュメントが有効であることを確認
- 他のリポジトリと調整: プロンプトが広く有用であることが判明した場合、共通ガイダンスをインストラクションファイルまたは共有プロンプトパックに抽出

## 追加リソース
- [Prompt Files Documentation](https://code.visualstudio.com/docs/copilot/customization/prompt-files#_prompt-file-format)
- [Awesome Copilot Prompt Files](https://github.com/github/awesome-copilot/tree/main/prompts)
- [Tool Configuration](https://code.visualstudio.com/docs/copilot/chat/chat-agent-mode#_agent-mode-tools)
